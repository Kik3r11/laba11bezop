<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<script type="text/javascript">
		function Shifr()
		{
			var arr = [];
			var ob1 = +prompt("Введите число P");
			var ob2 = +prompt("Введите число X");
			var ob3 = +prompt("Введите число M");
			var ob4 = +prompt("Введите число K");
			document.write("Введенные числа :" + "<br>" + "Р: " + ob1 + "<br>" + "Х: " + ob2 + "<br>" + "М: " + ob3 + "<br>" + "К: " + ob4)
			for(var i = 0; i < ob1; i++)
	    	{
	    		if(Eler(ob1, i))
	    		{
	    			arr.push(i);
	    		}

	    	}
	    	var dlina = arr.length;
	    	for(var j = 2; j < ob1; j++)
	    	{
	    		var result = j ** dlina;
	    		if(result > ob1)
	    		{
	    			if(result % ob1 == 1)
	    			{
		    			document.write("<br>" + "Первообразный корень числа " + ob1 + " = " + j);
		    			break;
	    			}
	    		}
	    		else
	    		{
	    			if(result == 1)
	    			document.write("<br>" + "Первообразный корень " + ob1 + " = " + j);
	    			break;
	    		}
	    		return j;		    			
	    	}
	    	if(1 < ob2 < ob1)
	    	{
	    		var y = (j ** ob2) % ob1;	
	    	}
	    	else
	    	{
	    		document.write("<br>" + "Число Х введено некорректно");
	    	}
	    	document.write("<br>" + "Открытые ключи: " + ob1 + ", " + ob2 + ", " + y);
	    	document.write("<br>" + "Закрытые ключи: " + ob2);
	    	var a = (j ** ob4) % ob1;
	    	var b = ((y ** ob4) * ob3) % ob1;
	    	document.write("<br>" + "Шифр:"+ "<br>" + "А = " + a + "<br>" + "B = " + b);
	    	var M = (b * (a ** (ob1 - 1 - ob2))) % ob1;
	    	document.write("<br>" + "Расшифровка:" + "<br>" + "Число М = " + M);
	    	function Eler (ob1, i)
    		{
				while(i)
				{
					a = ob1 % i;
					ob1 = i;
					i = a;
				}
				if (Math.abs(ob1) == 1) 
				{	
					return true; 
				}
			}
		}
	</script>
</head>
<body>
<button id="button1" onclick="Shifr();">Действие</button>
</body>
</html>